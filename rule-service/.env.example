# Rule Service Environment Configuration
# 12-Factor App: Store config in environment variables

# Application
APP_NAME=rule-service

# Database Configuration
DATABASE_URL=jdbc:mysql://localhost:3306/rule_service?useSSL=false&serverTimezone=UTC
DATABASE_USERNAME=root
DATABASE_PASSWORD=your_db_password
DATABASE_POOL_SIZE=20
DATABASE_MIN_IDLE=5
DATABASE_CONNECTION_TIMEOUT=30000

# JPA Configuration
JPA_DDL_AUTO=update
JPA_SHOW_SQL=false

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6381
REDIS_DATABASE=0
REDIS_PASSWORD=your_redis_password
REDIS_TIMEOUT=2000ms
REDIS_POOL_MAX_ACTIVE=20
REDIS_POOL_MAX_IDLE=10
REDIS_POOL_MIN_IDLE=5

# Cache Configuration
CACHE_TTL=600000
CACHE_KEY_PREFIX=rule-service
CACHE_DEFAULT_TTL=600
CACHE_RULE_COLLECTION_TTL=900
CACHE_RULE_CONFIG_TTL=1800
CACHE_ENABLE_STATS=true
CACHE_MAX_SIZE=10000

# gRPC Configuration
GRPC_PORT=9090
GRPC_MAX_MESSAGE_SIZE=104857600
GRPC_KEEP_ALIVE_TIME=30s
GRPC_KEEP_ALIVE_TIMEOUT=5s

# Validation Configuration
VALIDATION_MAX_COLLECTION_IDS=10
VALIDATION_MAX_ORDER_AMOUNT=100000000.0
VALIDATION_MIN_ORDER_AMOUNT=0.0
VALIDATION_CHECK_EXISTENCE=true
VALIDATION_STRICT_MODE=false

# Logging Configuration
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_APP=INFO
LOG_LEVEL_CACHE=INFO
LOG_LEVEL_REDIS=WARN

# Management & Monitoring
MANAGEMENT_ENDPOINTS=health,info,metrics,prometheus,cache
MANAGEMENT_HEALTH_DETAILS=when_authorized
METRICS_PROMETHEUS_ENABLED=true

# Production Environment Example
# DATABASE_URL=jdbc:mysql://prod-mysql:3306/rule_service?useSSL=true&serverTimezone=UTC
# DATABASE_USERNAME=rule_service_user
# DATABASE_PASSWORD=${DB_PASSWORD_SECRET}
# REDIS_HOST=prod-redis-cluster
# REDIS_PASSWORD=${REDIS_PASSWORD_SECRET}
# LOG_LEVEL_ROOT=WARN
# LOG_LEVEL_APP=INFO
# CACHE_DEFAULT_TTL=1800
# VALIDATION_STRICT_MODE=true
